import os
import requests
from flask import Flask, render_template, request, jsonify

app = Flask(__name__)
BOT_TOKEN = os.environ.get("BOT_TOKEN", "7619193220:AAGAsJcpKoZDu0GrKTvCOD3FIzM1UUWo-e0")
ADMIN_ID = os.environ.get("ADMIN_ID", "-1002533272445")  # —Å—Ç—Ä–æ–∫–∞ –∏–ª–∏ —á–∏—Å–ª–æ
TELEGRAM_API = f"https://api.telegram.org/bot{BOT_TOKEN}/sendMessage"

def send_to_telegram(text: str) -> bool:
    payload = {
        "chat_id": ADMIN_ID,
        "text": text,
        "parse_mode": "HTML"
    }
    try:
        resp = requests.post(TELEGRAM_API, data=payload, timeout=8)
        return resp.ok
    except Exception:
        return False

@app.route("/send-booking", methods=["POST"])
def send_booking():
    # —Å–æ–±–∏—Ä–∞–µ–º –∏–∑ —Ñ–æ—Ä–º—ã
    name = request.form.get("name", "‚Äî")
    checkin = request.form.get("checkin", "‚Äî")
    checkout = request.form.get("checkout", "‚Äî")
    people = request.form.get("people", "‚Äî")
    contact = request.form.get("contact", "‚Äî")
    comment = request.form.get("comment", "")

    message = (
        "üÜï <b>–ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞ —Å —Å–∞–π—Ç–∞</b>\n"
        f"–ò–º—è: {name}\n"
        f"–ó–∞–µ–∑–¥: {checkin}\n"
        f"–í—ã–µ–∑–¥: {checkout}\n"
        f"–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–µ–ª–æ–≤–µ–∫: {people}\n"
        f"–ö–æ–Ω—Ç–∞–∫—Ç: {contact}\n"
    )
    if comment:
        message += f"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: {comment}\n"

    ok = send_to_telegram(message)
    if ok:
        return jsonify({"status": "ok"}), 200
    else:
        return jsonify({"status": "error"}), 500
@app.route("/")
def home():
    gallery_images = [
        {"filename": "1.jpeg", "alt": "–£—Ç—Ä–æ –Ω–∞ –±–µ—Ä–µ–≥—É –°—É—Ä—ã", "caption": "–ö–∞–ø–∏—Ç–∞–Ω –ø—Ä–æ–≥—É–ª–æ—á–Ω–æ–≥–æ –∫–∞—Ç–µ—Ä–∞ '–î–∂–æ–π' –ï–≤–≥–µ–Ω–∏–π —à–ª—ë—Ç –≤—Å–µ–º —Ç—É—Ä–∏—Å—Ç–∞–º –≤–æ–∑–¥—É—à–Ω—ã–π –ø–æ—Ü–µ–ª—É–π –∏ –ø—Ä–∏–≥–ª–∞—à–∞–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å —Ä–µ—á–Ω—É—é –ø—Ä–æ–≥—É–ª–∫—É –Ω–∞ –µ–≥–æ –∫–∞—Ç–µ—Ä–µ."},
        {"filename": "2.jpeg", "alt": "–î–æ–∂–¥—å –≤ –ü–∞–ª–∞–Ω–µ", "caption": "–í –ü–∞–ª–∞–Ω–µ –¥–æ–∂–¥—å. –ù–æ —ç—Ç–æ –Ω–µ –ø–æ–≤–æ–¥ —Å–∏–¥–µ—Ç—å –¥–æ–º–∞!"},
        {"filename": "3.jpeg", "alt": "–í–∏–¥ –Ω–∞ –ø–æ–ª—è", "caption": "–°–æ–ª–Ω—Ü–µ —É–∂–µ –≤–æ–≤—Å—é –ø–∞–ª–∏—Ç. –£—Ç—Ä–æ –≤ –ü–∞–ª–∞–Ω–µ."},
        {"filename": "9.jpeg", "alt": "–î–æ–º–∏–∫ –≤ –∫–µ–º–ø–∏–Ω–≥–µ", "caption": "–°–æ–ª–Ω–µ—á–Ω—ã–π –ü–∞–ª–∞–Ω."},
        {"filename": "7.jpeg", "alt": "–†—ã–±–∞–ª–∫–∞ –Ω–∞ –°—É—Ä–µ", "caption": "–ï—Å—Ç—å –∂–µ–Ω—â–∏–Ω—ã –≤ –Ω–∞—à–µ–º –∫–µ–º–ø–∏–Ω–≥–µ, –∫–æ—Ç–æ—Ä—ã–µ –∏ –∫–æ–Ω—è, –∏ –≤ –∏–∑–±—É, –¥–∞ –∏ —Ä—ã–±—É –ø–æ–ª–æ–≤–∏—Ç—å –Ω–µ –ø—Ä–æ—á—å. –†—ã–±–∞—á–∫–∞ –ù–∏–Ω–∞ –∏–∑ –∫–µ–º–ø–∏–Ω–≥–∞ –ü–∞–ª–∞–Ω —Å —Ç—Ä–æ—Ñ–µ–µ–º."},
        {"filename": "12.jpeg", "alt": "–ó–Ω–∞–∫ –Ω–∞ –ü–∞–ª–∞–Ω", "caption": "–ß—Ç–æ–±—ã —É –ø—Ä–∏–µ–∑–∂–∞—é—â–∏—Ö —Ç—É—Ä–∏—Å—Ç–æ–≤ –Ω–µ –≤–æ–∑–Ω–∏–∫–∞–ª–æ —Ç—Ä—É–¥–Ω–æ—Å—Ç–∏, –∫–∞–∫ –Ω–∞—Å –Ω–∞–π—Ç–∏, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —É–∫–∞–∑–∞—Ç–µ–ª—å –ø–µ—Ä–µ–¥ –≤—ä–µ–∑–¥–æ–º –Ω–∞ –¥–∞–º–±—É. –ö –Ω–∞–º –Ω–∞–ø—Ä–∞–≤–æ, –ø–µ—Ä–µ–¥ –¥–∞–º–±–æ–π."}
    ]
    services_main = [
        {
            "name": "–ü–∞–ª–∞—Ç–∫–æ–º–µ—Å—Ç–æ (–¥–æ 3 —á–µ–ª–æ–≤–µ–∫)",
            "price": "1000",
            "weekend_price": "1200",
            "week_price": "7000",
            "monthly": "",
            "unit": "—Å—É—Ç–∫–∏",
            "note": "–î–µ—Ç–∏ –¥–æ 7 –ª–µ—Ç –±–µ—Å–ø–ª–∞—Ç–Ω–æ; 7‚Äì14 –ª–µ—Ç ‚Äî 50%"
        },
        {
            "name": "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —á–µ–ª–æ–≤–µ–∫ (—Å–≤—ã—à–µ 3)",
            "price": "300",
            "weekend_price": "400",
            "week_price": "",
            "monthly": "",
            "unit": "—á–µ–ª/—Å—É—Ç–∫–∏"
        },
        {
            "name": "–ü–∞–ª–∞—Ç–∫–∞ 2-–º–µ—Å—Ç–Ω–∞—è",
            "price": "500",
            "weekend_price": "600",
            "week_price": "3500",
            "monthly": "15000",
            "unit": "—Å—É—Ç–∫–∏"
        },
        {
            "name": "–ü–∞–ª–∞—Ç–∫–∞ 4-–º–µ—Å—Ç–Ω–∞—è",
            "price": "700",
            "weekend_price": "800",
            "week_price": "5000",
            "monthly": "20000",
            "unit": "—Å—É—Ç–∫–∏"
        },
        {
            "name": "–ë–∞–Ω—è (–º–∏–Ω. 2 —á–∞—Å–∞, –¥–æ 4 —á–µ–ª)",
            "price": "1000",
            "weekend_price": "1300",
            "week_price": "",
            "monthly": "",
            "unit": "—á–∞—Å"
        },
        {
            "name": "–û—Ö—Ä–∞–Ω—è–µ–º–∞—è —Å—Ç–æ—è–Ω–∫–∞",
            "price": "150",
            "weekend_price": "200",
            "week_price": "1000",
            "monthly": "4200",
            "unit": "–º–∞—à–∏–Ω–æ–º–µ—Å—Ç–æ/—Å—É—Ç–∫–∏"
        }
    ]
    addons = [
        {"name": "–°–ø–∞–ª—å–Ω—ã–π –º–µ—à–æ–∫", "price": "200", "weekend_price": "300", "week_price": "1500", "unit": "—Å—É—Ç–∫–∏"},
        {"name": "–ú–∞—Ç—Ä–∞—Å", "price": "200", "weekend_price": "300", "week_price": "1500", "unit": "—Å—É—Ç–∫–∏"},
        {"name": "–ë–µ—Å–µ–¥–∫–∞", "price": "500", "weekend_price": "", "week_price": "", "unit": "—á–∞—Å"},
        {"name": "–ú–∞–Ω–≥–∞–ª", "price": "200", "weekend_price": "", "week_price": "", "unit": "—Å—É—Ç–∫–∏"},
        {"name": "–í–µ–Ω–∏–∫ –¥–ª—è –±–∞–Ω–∏", "price": "250", "weekend_price": "", "week_price": "", "unit": "—à—Ç."},
        {"name": "–£–≥–æ–ª—å –¥–ª—è –º–∞–Ω–≥–∞–ª–∞", "price": "450", "weekend_price": "", "week_price": "", "unit": "–º–µ—à–æ–∫"}
    ]
    reviews = [
    {
        "author": "–ü–∞–≤–µ–ª –°.",
        "avatar": None,  # –º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π, –ø–æ–ª–æ–∂–∏ –≤ static/img/
        "text": """–î–≤–∞ –¥–Ω—è –±–µ–∑ —Å–≤—è–∑–∏ –∏ –≤—Å—Ç—Ä–µ—á–∞ —Å —Å—É–º–∞—Å—à–µ–¥—à–∏–º

–ü–æ—Å–ª–µ –ù–∏–∂–Ω–µ–≥–æ —É –Ω–∞—Å –±—ã–ª –∑–∞–ø–∞—Å –≤ 2 –¥–Ω—è –¥–æ –∑–∞—Å–µ–ª–µ–Ω–∏—è –≤ –¥–æ–º –ø–æ–¥ –ö–∞–∑–∞–Ω—å—é.

–ù—É —á—Ç–æ –∂, –∫–∞–∫ –∏ –≤ –ø—Ä–æ—à–ª–æ–º –≥–æ–¥—É –Ω—É–∂–Ω–æ –±—ã–ª–æ –≥–¥–µ-—Ç–æ —Ä–∞—Å—Ç—è–Ω—É—Ç—å –≤—Ä–µ–º—è, –≤–µ–¥—å –¥–æ –ö–∞–∑–∞–Ω–∏ –¥–µ–Ω—å –Ω–µ—Å–ø–µ—à–Ω–æ–π –µ–∑–¥—ã.

–ö–µ–º–ø–∏–Ω–≥? –ö–µ–º–ø–∏–Ω–≥!

–í–æ—Ç —Ç–æ–ª—å–∫–æ –≤—ã—Ö–æ–¥–Ω—ã–µ. –ê —è –ø–æ –ê—Å—Ç—Ä–∞—Ö–∞–Ω–∏ –ø–æ–º–Ω—é, —á—Ç–æ —Ä—è–¥–æ–º —Å –∫—Ä—É–ø–Ω—ã–º–∏ –≥–æ—Ä–æ–¥–∞–º–∏ –º–æ–∂–Ω–æ –Ω–∞—Ä–≤–∞—Ç—å—Å—è –Ω–∞ —Ç—É—Å–æ–≤—â–∏–∫–æ–≤ –∏ –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤ –±–∞–∑, –∫–æ—Ç–æ—Ä—ã–µ –≤—Å—ë –ø–æ—Ö.

–ü–æ—ç—Ç–æ–º—É –∑–∞—Ä–∞–Ω–µ–µ —Å–ø—Ä–∞—à–∏–≤–∞–ª, –±—ã–≤–∞—é—Ç –ª–∏ –±—É–π–Ω—ã–µ?

–í –æ–¥–Ω–æ–º –Ω–µ–¥–∞–ª–µ–∫–æ –æ—Ç –ù–∏–∂–Ω–µ–≥–æ —Å–∫–∞–∑–∞–ª–∏, —á—Ç–æ –¥–∞. –ù–æ –≤ 11 –≤–µ—á–µ—Ä–∞ –∏—Ö —É—Å–º–∏—Ä—è—é—Ç. –Ø —Ç–∞–∫–æ–π - –Ω—É-–Ω—É.

–í –¥—Ä—É–≥–æ–º —Å–∫–∞–∑–∞–ª–∏, —á—Ç–æ —É –Ω–∏—Ö –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –±—ã–≤–∞–µ—Ç —à—É–º–Ω—ã—Ö, –Ω–æ –º–Ω–µ —á—ë—Ç –Ω–µ –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å –æ–±—â–µ–Ω–∏–µ. –ù–∏ –ø–æ–∑–¥–æ—Ä–æ–≤–∞—Ç—å—Å—è, –æ—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –æ–¥–Ω–æ—Å–ª–æ–∂–Ω—ã–µ, –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ.

–ò —è –ø–æ–¥—É–º–∞–ª, –∞ —á—Ç–æ –µ—Å–ª–∏ —Ä–≤–∞–Ω—É—Ç—å –ø–æ–¥–∞–ª—å—à–µ –æ—Ç –ù–ù –∏ –∫–∞–∫ —Ä–∞–∑ —Å–æ–∫—Ä–∞—Ç–∏—Ç—å –ø—É—Ç—å –¥–∞–ª—å—à–µ.

–í 150 –∫–º –ø—Ä–∏–º–µ—Ä–Ω–æ –Ω–∞—à—ë–ª 2 –∫–µ–º–ø–∏–Ω–≥–∞.

–û–¥–∏–Ω –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–ª–∞ —Å–µ–º—å—è —Å 3 –¥–µ—Ç—å–º–∏. –ü–µ—Ä–µ–µ—Ö–∞–ª–∏ –∏–∑ –±–æ–ª—å—à–æ–≥–æ –≥–æ—Ä–æ–¥–∞ –≤ –º–∞–ª–µ–Ω—å–∫–∏–π –∏ —Ç–µ–ø–µ—Ä—å –æ–±—É—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è —Ç–∞–º. –°–æ–∑–¥–∞—é—Ç —Å–≤–æ—ë –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ.

–ú–Ω–µ –∑–∞—à–ª–∞ —Ç–∞–∫–∞—è –∏—Å—Ç–æ—Ä–∏—è (–ø—Ä–æ—á–∏—Ç–∞–ª –≤ –≥—Ä—É–ø–ø–µ –í–ö —É –Ω–∏—Ö) –∏ —è –∑–∞—Ö–æ—Ç–µ–ª –∫ –Ω–∏–º. –ù–æ —ç—Ç–æ –ø–µ—Ä–µ–ø—Ä–∞–≤–∞ —á–µ—Ä–µ–∑ –í–æ–ª–≥—É –Ω–∞ –ø–∞—Ä–æ–º–µ. –ü–æ—Å–ª–µ–¥–Ω–∏–π –≤ 18:00, –º—ã –Ω–µ —É—Å–ø–µ–≤–∞–µ–º, —Ç–∞–∫ –∫–∞–∫ –ø–æ–ª –¥–Ω—è –≥—É–ª—è–ª–∏ –ø–æ –≥–æ—Ä–æ–¥—É. –¢–æ –µ—Å—Ç—å –≤—ã–µ–∑–∂–∞–ª–∏ –Ω–∞ —Å —É—Ç—Ä–∞.

–í—Ç–æ—Ä–æ–π. –ó–≤–æ–Ω—é. –°–ø—Ä–∞—à–∏–≤–∞—é, –µ—Å—Ç—å –ª–∏ –º–µ—Å—Ç–∞, –µ—Å—Ç—å –ª–∏ –±—É–π–Ω—ã–µ.

–ì–æ–≤–æ—Ä—è—Ç, —Ç–æ–ª—å–∫–æ —á—Ç–æ –ø—Ä–∏–µ—Ö–∞–ª–∞ —Å–µ–º—å—è —Å 2 –¥–µ—Ç—å–º–∏ –∏ –±–æ–ª—å—à–µ –Ω–∏–∫–æ–≥–æ. –£–≤–µ—Ä–∏–ª–∏, —á—Ç–æ –º—ã –±—É–¥–µ–º –∫–∞–∫ –±–æ—è—Ä–µ.

–ú–Ω–µ —Ç–∞–∫–∞—è –ø—Ä–æ—Å—Ç–∞—è –ø–æ–¥–∞—á–∞ –ø–æ–Ω—Ä–∞–≤–∏–ª–∞—Å—å) –ò –º—ã –¥–≤–∏–Ω—É–ª–∏ —Ç—É–¥–∞.

–í—Å—Ç—Ä–µ—Ç–∏–ª –Ω–∞—Å –∫–ª–∞—Å—Å–Ω—ã–π –æ–±—â–∏—Ç–µ–ª—å–Ω—ã–π –∏ –ø—Ä–æ—Å—Ç–æ–π –º—É–∂–∏–∫.

–û–∫–∞–∑–∞–ª–æ—Å—å, —á—Ç–æ –æ–Ω–∏ –æ—Ç–∫—Ä—ã–ª–∏—Å—å –±—É–∫–≤–∞–ª—å–Ω–æ –Ω–µ–¥–µ–ª—é –Ω–∞–∑–∞–¥.

–î—É—à –∏ —Ç—É–∞–ª–µ—Ç—ã –ø—Ä—è–º –æ–≥–æ–Ω—ë–∫, –ª—É—á—à–µ, —á–µ–º –≤ 90% —Ä–µ—Å—Ç–∏–∫–æ–≤ –ü–µ—Ç—Ä–æ–∑–∞–≤–æ–¥—Å–∫–∞) –í–æ–æ–±—â–µ –∫–ª–∞—Å—Å!

–ü–æ–ª—è–Ω–∞ –±–æ–ª—å—à–∞—è, —Å–≤–µ—Ç –µ—Å—Ç—å, –∫–æ—Å—Ç—ë—Ä –º–æ–∂–Ω–æ –∂–µ—á—å, –¥–æ –±–µ—Ä–µ–≥–∞ –í–æ–ª–≥–∏ –Ω–æ–≥–æ–π –ø–æ–¥–∞—Ç—å.

–û–¥–∏–Ω –º–∏–Ω—É—Å (–ø–ª—é—Å) - —Å–≤—è–∑–∏ –ø–∞—Ä—É –ø–∞–ª–æ–∫ –∞ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –≤–æ–æ–±—â–µ –Ω–µ—Ç.

–ó–∞—Ç–æ –∏–≥—Ä–∞–ª–∏ –≤ —Ñ—É—Ç–±–æ–ª —Å —Ä–µ–±—è—Ç–∞–º–∏, –ª–∞–∑–∞–ª–∏ –ø–æ –¥–µ—Ä–µ–≤—å—è–º, —á–∏—Ç–∞–ª–∏ –∫–Ω–∏–∂–∫–∏ –∏ –∫–∞—Ç–∞–ª–∏—Å—å –Ω–∞ –ø–∞—Ä–æ–º–µ –≤ —Å—Ç–∞—Ä—ã–π –Ω–µ–±–æ–ª—å—à–æ–π –∏ —É—Ö–æ–∂–µ–Ω–Ω—ã–π –≥–æ—Ä–æ–¥–æ–∫ –í–∞—Å–∏–ª—å—Å—É—Ä—Å–∫.

–ò —Ç–∞–º –∂–µ –Ω–∞ –ø–∞—Ä–æ–º–µ –≤—Å—Ç—Ä–µ—Ç–∏–ª –≤–µ–ª–æ–ø—É—Ç–µ—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫–∞ - –µ–¥–µ—Ç –∏–∑ –†—ã–±–∏–Ω—Å–∫–∞ –Ω–∞ –ß—ë—Ä–Ω–æ–µ –º–æ—Ä–µ. –£—Ñ—Ñ.

–†–µ—à–∏–ª –¥–∞–∂–µ —Å—Ñ–æ—Ç–∫–∞—Ç—å—Å—è —Å –Ω–∏–º. –ì–æ–≤–æ—Ä—é –µ–º—É: –ø–æ—Ä–∞–∂–∞—é—Å—å —Ç–∞–∫–∏–º –ª—é–¥—è–º –∫–∞–∫ –≤—ã! –ê –æ–Ω —Ç–∞–∫ —Å–∫—Ä–æ–º–Ω–æ: –¥–∞ –ª–∞–¥–Ω–æ, —è –Ω–µ —Å–∞–º—ã–π —Å—É–º–∞—Å—à–µ–¥—à–∏–π –µ—â—ë. –ï—Å—Ç—å —Ö—É–∂–µüòÄ

–í–µ—Ä—é, —á—Ç–æ –µ—Å—Ç—å.

–ü–æ—Å–ª–µ –±–æ–ª—å—à–æ–≥–æ –≥–æ—Ä–æ–¥–∞ –≤–¥–æ—Ö–Ω—É–ª–∏ –ø—Ä–∏—Ä–æ–¥—ã, –ø–æ—Ç—Ä—è—Å–Ω—ã—Ö –≤–∏–¥–æ–≤ –∏ –æ—Ç–∫—Ä—ã–ª–∏ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π —É–≥–æ–ª–æ–∫ –Ω–∞ –∫–∞—Ä—Ç–µ.

–ò –¥–≤–∏–Ω—É–ª–∏—Å—å –¥–∞–ª—å—à–µ.""",
        "date": "12 –∏—é–ª—è 2025",
        "rating": 5,
        "source_link": "https://vk.com/club180860424"
    }
    
]

    return render_template("index.html",
                           gallery_images=gallery_images,
                           services_main=services_main,
                           addons=addons,
                           reviews=reviews)

@app.route("/ping")
def ping():
    return "pong"


if __name__ == "__main__":
    app.run(host="0.0.0.0", port=5005, debug=True)
