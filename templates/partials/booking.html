<section id="booking" class="booking-section py-5">
  <div class="container">
    <div class="text-center mb-4">
      <h2 class="fw-bold">Бронирование</h2>
      <p class="lead text-secondary">Оставь заявку — быстро и без лишнего пафоса. Мы получим её в Telegram.</p>
    </div>

    <div class="booking-card-wrapper">
      <div class="booking-main">
        <div class="booking-card">
          <form id="booking-form">
            <div class="mb-3">
              <label class="form-label fw-semibold">Имя</label>
              <input name="name" type="text" class="form-control" placeholder="Иван" required>
            </div>
            <div class="row g-3 mb-3">
              <div class="col-md-6">
                <label class="form-label fw-semibold">Дата заезда</label>
                <input name="checkin" type="date" class="form-control" required>
              </div>
              <div class="col-md-6">
                <label class="form-label fw-semibold">Дата отъезда</label>
                <input name="checkout" type="date" class="form-control" required>
              </div>
            </div>
            <div class="mb-3">
              <label class="form-label fw-semibold">Количество человек</label>
              <input name="people" type="number" min="1" class="form-control" value="2" required>
            </div>
            <div class="mb-3">
              <label class="form-label fw-semibold">Контакт (Telegram / телефон)</label>
              <input name="contact" type="text" class="form-control" placeholder="+7 (910) 795-9427 или @username" required>
            </div>
            <div class="mb-3">
              <label class="form-label fw-semibold">Комментарий (опционально)</label>
              <textarea name="comment" class="form-control" rows="2" placeholder="Хочу с друзьями, с собакой и т.п."></textarea>
            </div>
            <div class="d-flex flex-wrap gap-2">
              <button type="submit" class="btn btn-primary">
                Отправить заявку
              </button>
              <a href="https://t.me/palannavolge" target="_blank" class="btn btn-telegram d-flex align-items-center">
                <i class="bi bi-telegram fs-5 me-2"></i> Написать в Telegram
              </a>
            </div>
            <div id="booking-status" class="mt-3 small"></div>
          </form>
        </div>
      </div>

      <div class="booking-contacts">
        <div class="contact-card">
          <h5 class="mb-3">Контакты</h5>
          <p class="mb-2 d-flex align-items-center">
            <i class="bi bi-telephone-fill me-2"></i>
            <a href="tel:+79334255200">+7 (910) 795-9427</a>
          </p>
          <p class="mb-2 d-flex align-items-center">
            <i class="bi bi-envelope-fill me-2"></i>
            <a href="mailto:holli67@mail.ru">holli67@mail.ru</a>
          </p>
          <p class="mb-2 d-flex align-items-center">
            <svg width="16" height="16" fill="currentColor" class="me-2" viewBox="0 0 256 256" xmlns="http://www.w3.org/2000/svg">
              <path d="M204.3 51.7c-4.8-3.7-11.6-1.3-14.6 4.6-7.2 15.7-16.3 31-27.1 44.8-6.9-..."
              />
            </svg>
            <a href="https://vk.com/club180860424" target="_blank">vk.com/club180860424</a>
          </p>
          <p class="small-muted mb-0">Или просто напиши / позвони — поможем с датой и подготовим место к приезду.</p>
        </div>
      </div>
    </div>
  </div>

  <script>
    const form = document.getElementById("booking-form");
    const statusEl = document.getElementById("booking-status");
    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      statusEl.textContent = "Отправляю...";
      const data = new FormData(form);
      try {
        const res = await fetch("/send-booking", {
          method: "POST",
          body: data
        });
        if (res.ok) {
          statusEl.textContent = "✅ Заявка отправлена! Жди подтверждения в Telegram.";
          form.reset();
        } else {
          const j = await res.json().catch(() => ({}));
          statusEl.textContent = "❌ Ошибка отправки" + (j.detail ? ": " + j.detail : "");
        }
      } catch (err) {
        statusEl.textContent = "❌ Сеть или сервер недоступен.";
      }
    });
  </script>
</section>
